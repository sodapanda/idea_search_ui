import{S as O,i as z,s as U,v as Z,Z as F,k as R,a as V,x as j,l as M,m as P,c as T,y as S,h,n as q,b as I,M as b,z as D,T as G,d as H,_ as K,f as k,t as y,A as E,o as L,q as A,r as B,g as Q,U as W,u as X}from"../../../chunks/index-e1e88ea1.js";import{l as g}from"../../../chunks/singletons-74609e52.js";import"../../../chunks/Indicator.svelte_svelte_type_style_lang-3c3a1caf.js";import{B as C,P as Y}from"../../../chunks/P-c856d157.js";import{I as x}from"../../../chunks/Input-7e1f0f7d.js";import{r as ee}from"../../../chunks/IdeaStore-b37c202c.js";g.disable_scroll_handling;const te=g.goto;g.invalidate;g.invalidateAll;g.preload_data;g.preload_code;g.before_navigate;g.after_navigate;function J(l,t,e){const a=l.slice();return a[8]=t[e],a}function ne(l){let t=l[8].rolename+"",e;return{c(){e=A(t)},l(a){e=B(a,t)},m(a,c){I(a,e,c)},p(a,c){c&1&&t!==(t=a[8].rolename+"")&&X(e,t)},d(a){a&&h(e)}}}function ae(l){let t;return{c(){t=A("需求")},l(e){t=B(e,"需求")},m(e,a){I(e,t,a)},d(e){e&&h(t)}}}function se(l){let t;return{c(){t=A("删除")},l(e){t=B(e,"删除")},m(e,a){I(e,t,a)},d(e){e&&h(t)}}}function N(l,t){let e,a,c,o,r,m,_,f;a=new Y({props:{$$slots:{default:[ne]},$$scope:{ctx:t}}});function v(){return t[4](t[8])}r=new C({props:{$$slots:{default:[ae]},$$scope:{ctx:t}}}),r.$on("click",v);function u(){return t[5](t[8])}return _=new C({props:{$$slots:{default:[se]},$$scope:{ctx:t}}}),_.$on("click",u),{key:l,first:null,c(){e=R("div"),j(a.$$.fragment),c=V(),o=R("div"),j(r.$$.fragment),m=V(),j(_.$$.fragment),this.h()},l(i){e=M(i,"DIV",{class:!0});var d=P(e);S(a.$$.fragment,d),c=T(d),o=M(d,"DIV",{class:!0});var $=P(o);S(r.$$.fragment,$),m=T($),S(_.$$.fragment,$),$.forEach(h),d.forEach(h),this.h()},h(){q(o,"class","flex flex-row gap-2 [&>*]:shrink-0"),q(e,"class","flex flex-row items-center gap-2 mb-2 w-96 justify-between"),this.first=e},m(i,d){I(i,e,d),D(a,e,null),b(e,c),b(e,o),D(r,o,null),b(o,m),D(_,o,null),f=!0},p(i,d){t=i;const $={};d&2049&&($.$$scope={dirty:d,ctx:t}),a.$set($);const n={};d&2048&&(n.$$scope={dirty:d,ctx:t}),r.$set(n);const s={};d&2048&&(s.$$scope={dirty:d,ctx:t}),_.$set(s)},i(i){f||(k(a.$$.fragment,i),k(r.$$.fragment,i),k(_.$$.fragment,i),f=!0)},o(i){y(a.$$.fragment,i),y(r.$$.fragment,i),y(_.$$.fragment,i),f=!1},d(i){i&&h(e),E(a),E(r),E(_)}}}function le(l){let t;return{c(){t=A("添加")},l(e){t=B(e,"添加")},m(e,a){I(e,t,a)},d(e){e&&h(t)}}}function oe(l){let t,e=[],a=new Map,c,o,r,m,_,f,v,u=l[0];const i=n=>n[8].id;for(let n=0;n<u.length;n+=1){let s=J(l,u,n),p=i(s);a.set(p,e[n]=N(p,s))}function d(n){l[6](n)}let $={class:"grow",placeholder:"角色"};return l[1]!==void 0&&($.value=l[1]),r=new x({props:$}),Z.push(()=>F(r,"value",d)),f=new C({props:{class:"shrink-0",$$slots:{default:[le]},$$scope:{ctx:l}}}),f.$on("click",l[7]),{c(){t=R("div");for(let n=0;n<e.length;n+=1)e[n].c();c=V(),o=R("div"),j(r.$$.fragment),_=V(),j(f.$$.fragment),this.h()},l(n){t=M(n,"DIV",{class:!0});var s=P(t);for(let w=0;w<e.length;w+=1)e[w].l(s);c=T(s),o=M(s,"DIV",{class:!0});var p=P(o);S(r.$$.fragment,p),_=T(p),S(f.$$.fragment,p),p.forEach(h),s.forEach(h),this.h()},h(){q(o,"class","flex flex-row items-center gap-2 mt-4 w-96 justify-between"),q(t,"class","h-full w-full bg-slate-200 p-8")},m(n,s){I(n,t,s);for(let p=0;p<e.length;p+=1)e[p].m(t,null);b(t,c),b(t,o),D(r,o,null),b(o,_),D(f,o,null),v=!0},p(n,[s]){s&13&&(u=n[0],Q(),e=G(e,s,i,1,n,u,a,t,W,N,c,J),H());const p={};!m&&s&2&&(m=!0,p.value=n[1],K(()=>m=!1)),r.$set(p);const w={};s&2048&&(w.$$scope={dirty:s,ctx:n}),f.$set(w)},i(n){if(!v){for(let s=0;s<u.length;s+=1)k(e[s]);k(r.$$.fragment,n),k(f.$$.fragment,n),v=!0}},o(n){for(let s=0;s<e.length;s+=1)y(e[s]);y(r.$$.fragment,n),y(f.$$.fragment,n),v=!1},d(n){n&&h(t);for(let s=0;s<e.length;s+=1)e[s].d();E(r),E(f)}}}async function re(l){await fetch(`https://ideasearch.leucas.io/role/del?id=${l}`)}async function ie(l){await(await fetch("https://ideasearch.leucas.io/role/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleName:l})})).json()}function ce(l,t,e){let a=[],c="";L(async()=>{o()});async function o(){const i=await(await fetch("https://ideasearch.leucas.io/role/get")).json();e(0,a=i)}const r=u=>{te(u)},m=u=>{r("/needs"),ee.set(u)},_=async u=>{await re(u.id),await o()};function f(u){c=u,e(1,c)}return[a,c,o,r,m,_,f,async()=>{c&&(await ie(c),await o(),e(1,c=""))}]}class he extends O{constructor(t){super(),z(this,t,ce,oe,U,{})}}export{he as default};
