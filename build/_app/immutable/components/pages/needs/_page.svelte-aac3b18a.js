import{S as U,i as Z,s as F,v as G,Z as K,k as M,x as I,a as S,l as N,m as P,y as j,c as D,h as $,n as T,b as k,z as E,M as g,T as Q,d as W,_ as X,f as w,t as b,A as V,R as Y,o as x,q,r as B,u as A,g as ee,U as te}from"../../../chunks/index-e1e88ea1.js";import{r as ne}from"../../../chunks/IdeaStore-b37c202c.js";import"../../../chunks/Indicator.svelte_svelte_type_style_lang-3c3a1caf.js";import{B as L,P as se}from"../../../chunks/P-c856d157.js";import{I as ae}from"../../../chunks/Input-7e1f0f7d.js";import{H as le}from"../../../chunks/Heading-43606fcb.js";function O(c,t,e){const n=c.slice();return n[7]=t[e],n}function oe(c){let t=c[2].rolename+"",e;return{c(){e=q(t)},l(n){e=B(n,t)},m(n,i){k(n,e,i)},p(n,i){i&4&&t!==(t=n[2].rolename+"")&&A(e,t)},d(n){n&&$(e)}}}function re(c){let t=c[7].needcontent+"",e;return{c(){e=q(t)},l(n){e=B(n,t)},m(n,i){k(n,e,i)},p(n,i){i&1&&t!==(t=n[7].needcontent+"")&&A(e,t)},d(n){n&&$(e)}}}function ie(c){let t;return{c(){t=q("删除")},l(e){t=B(e,"删除")},m(e,n){k(e,t,n)},d(e){e&&$(t)}}}function z(c,t){let e,n,i,l,p,_;n=new se({props:{$$slots:{default:[re]},$$scope:{ctx:t}}});function u(){return t[4](t[7])}return l=new L({props:{$$slots:{default:[ie]},$$scope:{ctx:t}}}),l.$on("click",u),{key:c,first:null,c(){e=M("div"),I(n.$$.fragment),i=S(),I(l.$$.fragment),p=S(),this.h()},l(o){e=N(o,"DIV",{class:!0});var r=P(e);j(n.$$.fragment,r),i=D(r),j(l.$$.fragment,r),p=D(r),r.forEach($),this.h()},h(){T(e,"class","flex flex-row justify-between items-center"),this.first=e},m(o,r){k(o,e,r),E(n,e,null),g(e,i),E(l,e,null),g(e,p),_=!0},p(o,r){t=o;const h={};r&1025&&(h.$$scope={dirty:r,ctx:t}),n.$set(h);const f={};r&1024&&(f.$$scope={dirty:r,ctx:t}),l.$set(f)},i(o){_||(w(n.$$.fragment,o),w(l.$$.fragment,o),_=!0)},o(o){b(n.$$.fragment,o),b(l.$$.fragment,o),_=!1},d(o){o&&$(e),V(n),V(l)}}}function ce(c){let t;return{c(){t=q("添加")},l(e){t=B(e,"添加")},m(e,n){k(e,t,n)},d(e){e&&$(t)}}}function fe(c){let t,e,n,i,l=[],p=new Map,_,u,o,r,h,f,C;e=new le({props:{$$slots:{default:[oe]},$$scope:{ctx:c}}});let y=c[0];const H=s=>s[7].id;for(let s=0;s<y.length;s+=1){let a=O(c,y,s),d=H(a);p.set(d,l[s]=z(d,a))}function R(s){c[5](s)}let J={class:"grow",placeholder:"新需求"};return c[1]!==void 0&&(J.value=c[1]),o=new ae({props:J}),G.push(()=>K(o,"value",R)),f=new L({props:{class:"shrink-0",$$slots:{default:[ce]},$$scope:{ctx:c}}}),f.$on("click",c[6]),{c(){t=M("div"),I(e.$$.fragment),n=S(),i=M("div");for(let s=0;s<l.length;s+=1)l[s].c();_=S(),u=M("div"),I(o.$$.fragment),h=S(),I(f.$$.fragment),this.h()},l(s){t=N(s,"DIV",{class:!0});var a=P(t);j(e.$$.fragment,a),n=D(a),i=N(a,"DIV",{class:!0});var d=P(i);for(let v=0;v<l.length;v+=1)l[v].l(d);d.forEach($),_=D(a),u=N(a,"DIV",{class:!0});var m=P(u);j(o.$$.fragment,m),h=D(m),j(f.$$.fragment,m),m.forEach($),a.forEach($),this.h()},h(){T(i,"class","flex flex-col w-96 gap-2 mt-8"),T(u,"class","flex flex-row w-96 gap-2 mt-8"),T(t,"class","h-full w-full bg-slate-200 p-8")},m(s,a){k(s,t,a),E(e,t,null),g(t,n),g(t,i);for(let d=0;d<l.length;d+=1)l[d].m(i,null);g(t,_),g(t,u),E(o,u,null),g(u,h),E(f,u,null),C=!0},p(s,[a]){const d={};a&1028&&(d.$$scope={dirty:a,ctx:s}),e.$set(d),a&9&&(y=s[0],ee(),l=Q(l,a,H,1,s,y,p,i,te,z,null,O),W());const m={};!r&&a&2&&(r=!0,m.value=s[1],X(()=>r=!1)),o.$set(m);const v={};a&1024&&(v.$$scope={dirty:a,ctx:s}),f.$set(v)},i(s){if(!C){w(e.$$.fragment,s);for(let a=0;a<y.length;a+=1)w(l[a]);w(o.$$.fragment,s),w(f.$$.fragment,s),C=!0}},o(s){b(e.$$.fragment,s);for(let a=0;a<l.length;a+=1)b(l[a]);b(o.$$.fragment,s),b(f.$$.fragment,s),C=!1},d(s){s&&$(t),V(e);for(let a=0;a<l.length;a+=1)l[a].d();V(o),V(f)}}}function ue(c,t,e){let n;Y(c,ne,r=>e(2,n=r));let i=[],l="";x(async()=>{p()});async function p(){const h=await(await fetch(`https://ideasearch.leucas.io/needs/get?role_id=${n.id}`)).json();e(0,i=h)}const _=async r=>{const f=await(await fetch(`https://ideasearch.leucas.io/needs/del?id=${r.id}`)).json();console.log(f),p()};function u(r){l=r,e(1,l)}return[i,l,n,p,_,u,async()=>{await(await fetch("https://ideasearch.leucas.io/needs/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleId:n.id,needContent:l})})).json(),await p(),e(1,l="")}]}class ge extends U{constructor(t){super(),Z(this,t,ue,fe,F,{})}}export{ge as default};
